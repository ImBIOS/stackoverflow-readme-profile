import{S as fe,i as de,s as he,B as et,C as tt,m as b,h as u,n as i,b as T,D as h,A as N,k as g,a as C,v as ee,q as L,l as m,c as D,w as te,r as S,$ as $e,x as ae,T as x,Y as dt,f as y,t as I,y as le,U as ht,o as Pe,K as _t,M as at,u as Ie,e as ie,g as ce,d as ue,V as pt,W as gt,X as mt}from"../../../../chunks/index-ec10dd0a.js";import{Q as bt}from"../../../../chunks/Question-f5249f3d.js";import{L as vt}from"../../../../chunks/LastUpdate-5ee10c39.js";import{k as ne}from"../../../../chunks/constants-131af7a9.js";function kt(o){let e,t;return{c(){e=et("svg"),t=et("path"),this.h()},l(a){e=tt(a,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,class:!0,viewBox:!0});var s=b(e);t=tt(s,"path",{d:!0}),b(t).forEach(u),s.forEach(u),this.h()},h(){i(t,"d","M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10z"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"width","16"),i(e,"height","16"),i(e,"fill","currentColor"),i(e,"class","bi bi-person"),i(e,"viewBox","0 0 16 16")},m(a,s){T(a,e,s),h(e,t)},p:N,i:N,o:N,d(a){a&&u(e)}}}class Et extends fe{constructor(e){super(),de(this,e,null,kt,he,{})}}function Tt(o){let e,t,a,s,r,l,n,c,d,k;return l=new Et({}),{c(){e=g("form"),t=g("div"),a=g("input"),s=C(),r=g("button"),ee(l.$$.fragment),n=L(" Log In"),this.h()},l(_){e=m(_,"FORM",{class:!0});var v=b(e);t=m(v,"DIV",{class:!0});var f=b(t);a=m(f,"INPUT",{type:!0,class:!0,placeholder:!0,"aria-label":!0}),s=D(f),r=m(f,"BUTTON",{class:!0,type:!0});var p=b(r);te(l.$$.fragment,p),n=S(p," Log In"),p.forEach(u),f.forEach(u),v.forEach(u),this.h()},h(){i(a,"type","password"),i(a,"class","form-control bg-dark text-white"),i(a,"placeholder","Password"),i(a,"aria-label","Password"),i(r,"class","btn btn-outline-primary"),i(r,"type","submit"),i(t,"class","input-group mt-3 w-25"),i(e,"class","row g-3")},m(_,v){T(_,e,v),h(e,t),h(t,a),$e(a,o[0]),h(t,s),h(t,r),ae(l,r,null),h(r,n),c=!0,d||(k=[x(a,"input",o[3]),x(e,"submit",dt(o[1]))],d=!0)},p(_,[v]){v&1&&a.value!==_[0]&&$e(a,_[0])},i(_){c||(y(l.$$.fragment,_),c=!0)},o(_){I(l.$$.fragment,_),c=!1},d(_){_&&u(e),le(l),d=!1,ht(k)}}}const Ue="API_TOKEN";function yt(o,e,t){let{validToken:a}=e,s;const r=async()=>{await l(s)?(t(2,a=s),localStorage.setItem(Ue,s)):alert("Invalid password!")},l=async d=>(await fetch(`${ne}/tags-league/auth`,{headers:new Headers({authorization:d})})).status===200,n=async()=>{const d=localStorage.getItem(Ue);d&&(await l(d)?t(2,a=d):localStorage.removeItem(Ue))};Pe(()=>{n()});function c(){s=this.value,t(0,s)}return o.$$set=d=>{"validToken"in d&&t(2,a=d.validToken)},[s,r,a,c]}class wt extends fe{constructor(e){super(),de(this,e,yt,Tt,he,{validToken:2})}}function lt(o,e,t){const a=o.slice();return a[2]=e[t],a}function st(o){let e,t,a=o[2]+"",s,r;return{c(){e=g("li"),t=g("span"),s=L(a),r=C(),this.h()},l(l){e=m(l,"LI",{class:!0});var n=b(e);t=m(n,"SPAN",{class:!0});var c=b(t);s=S(c,a),c.forEach(u),r=D(n),n.forEach(u),this.h()},h(){i(t,"class","mx-1 so-tag text-bg-dark svelte-z6urwu"),at(t,"computed",o[1].includes(o[2])),i(e,"class","my-1")},m(l,n){T(l,e,n),h(e,t),h(t,s),h(e,r)},p(l,n){n&1&&a!==(a=l[2]+"")&&Ie(s,a),n&3&&at(t,"computed",l[1].includes(l[2]))},d(l){l&&u(e)}}}function $t(o){let e,t=o[0],a=[];for(let s=0;s<t.length;s+=1)a[s]=st(lt(o,t,s));return{c(){e=g("ul");for(let s=0;s<a.length;s+=1)a[s].c();this.h()},l(s){e=m(s,"UL",{class:!0});var r=b(e);for(let l=0;l<a.length;l+=1)a[l].l(r);r.forEach(u),this.h()},h(){i(e,"class","d-flex justify-content-center flex-wrap mt-2 list-unstyled")},m(s,r){T(s,e,r);for(let l=0;l<a.length;l+=1)a[l].m(e,null)},p(s,[r]){if(r&3){t=s[0];let l;for(l=0;l<t.length;l+=1){const n=lt(s,t,l);a[l]?a[l].p(n,r):(a[l]=st(n),a[l].c(),a[l].m(e,null))}for(;l<a.length;l+=1)a[l].d(1);a.length=t.length}},i:N,o:N,d(s){s&&u(e),_t(a,s)}}}function It(o,e,t){let{tags:a=[]}=e,{computedTags:s=[]}=e;return o.$$set=r=>{"tags"in r&&t(0,a=r.tags),"computedTags"in r&&t(1,s=r.computedTags)},[a,s]}class Lt extends fe{constructor(e){super(),de(this,e,It,$t,he,{tags:0,computedTags:1})}}var me=(o=>(o.LEAGUE_COMPUTATION_START="start_compute",o.LEAGUE_COMPUTATION_STOP="stop_compute",o.LEAGUE_COMPUTATION_END="end_compute",o.MESSAGE="message",o.ERROR="error",o.SERVER_START="server_start",o))(me||{});function rt(o){let e,t,a,s,r;return{c(){e=g("div"),t=g("button"),a=L("see message"),this.h()},l(l){e=m(l,"DIV",{});var n=b(e);t=m(n,"BUTTON",{class:!0});var c=b(t);a=S(c,"see message"),c.forEach(u),n.forEach(u),this.h()},h(){i(t,"class","ms-2 btn btn-outline-primary btn-sm")},m(l,n){T(l,e,n),h(e,t),h(t,a),s||(r=x(t,"click",o[3]),s=!0)},p:N,d(l){l&&u(e),s=!1,r()}}}function ot(o){let e,t,a=o[0].message+"",s;return{c(){e=g("div"),t=g("p"),s=L(a),this.h()},l(r){e=m(r,"DIV",{class:!0});var l=b(e);t=m(l,"P",{});var n=b(t);s=S(n,a),n.forEach(u),l.forEach(u),this.h()},h(){i(e,"class","card card-body bg-dark")},m(r,l){T(r,e,l),h(e,t),h(t,s)},p(r,l){l&1&&a!==(a=r[0].message+"")&&Ie(s,a)},d(r){r&&u(e)}}}function St(o){let e,t,a=o[0].type+"",s,r,l=new Date(o[0].createdAt).toLocaleString()+"",n,c,d,k,_=o[0].message&&rt(o),v=o[1]&&ot(o);return{c(){e=g("div"),t=g("span"),s=L(a),r=C(),n=L(l),c=C(),_&&_.c(),d=C(),v&&v.c(),k=ie(),this.h()},l(f){e=m(f,"DIV",{class:!0});var p=b(e);t=m(p,"SPAN",{class:!0});var w=b(t);s=S(w,a),w.forEach(u),r=D(p),n=S(p,l),c=D(p),_&&_.l(p),p.forEach(u),d=D(f),v&&v.l(f),k=ie(),this.h()},h(){i(t,"class","badge "+o[2]()+" me-2"),i(e,"class","d-flex align-items-center")},m(f,p){T(f,e,p),h(e,t),h(t,s),h(e,r),h(e,n),h(e,c),_&&_.m(e,null),T(f,d,p),v&&v.m(f,p),T(f,k,p)},p(f,[p]){p&1&&a!==(a=f[0].type+"")&&Ie(s,a),p&1&&l!==(l=new Date(f[0].createdAt).toLocaleString()+"")&&Ie(n,l),f[0].message?_?_.p(f,p):(_=rt(f),_.c(),_.m(e,null)):_&&(_.d(1),_=null),f[1]?v?v.p(f,p):(v=ot(f),v.c(),v.m(k.parentNode,k)):v&&(v.d(1),v=null)},i:N,o:N,d(f){f&&u(e),_&&_.d(),f&&u(d),v&&v.d(f),f&&u(k)}}}function Ct(o,e,t){let{log:a}=e,s=!1;const r=()=>{switch(a.type){case me.ERROR:return"bg-danger";case me.LEAGUE_COMPUTATION_END:case me.LEAGUE_COMPUTATION_START:return"bg-info";case me.LEAGUE_COMPUTATION_STOP:return"bg-warning text-dark";default:return"bg-success"}},l=()=>t(1,s=!0);return o.$$set=n=>{"log"in n&&t(0,a=n.log)},[a,s,r,l]}class Dt extends fe{constructor(e){super(),de(this,e,Ct,St,he,{log:0})}}function nt(o,e,t){const a=o.slice();return a[4]=e[t],a}function Ot(o){let e;return{c(){e=L("...loading")},l(t){e=S(t,"...loading")},m(t,a){T(t,e,a)},p:N,i:N,o:N,d(t){t&&u(e)}}}function At(o){let e,t,a=o[0],s=[];for(let l=0;l<a.length;l+=1)s[l]=it(nt(o,a,l));const r=l=>I(s[l],1,1,()=>{s[l]=null});return{c(){e=g("ul");for(let l=0;l<s.length;l+=1)s[l].c();this.h()},l(l){e=m(l,"UL",{class:!0});var n=b(e);for(let c=0;c<s.length;c+=1)s[c].l(n);n.forEach(u),this.h()},h(){i(e,"class","list-group")},m(l,n){T(l,e,n);for(let c=0;c<s.length;c+=1)s[c].m(e,null);t=!0},p(l,n){if(n&1){a=l[0];let c;for(c=0;c<a.length;c+=1){const d=nt(l,a,c);s[c]?(s[c].p(d,n),y(s[c],1)):(s[c]=it(d),s[c].c(),y(s[c],1),s[c].m(e,null))}for(ce(),c=a.length;c<s.length;c+=1)r(c);ue()}},i(l){if(!t){for(let n=0;n<a.length;n+=1)y(s[n]);t=!0}},o(l){s=s.filter(Boolean);for(let n=0;n<s.length;n+=1)I(s[n]);t=!1},d(l){l&&u(e),_t(s,l)}}}function it(o){let e,t,a,s;return t=new Dt({props:{log:o[4]}}),{c(){e=g("li"),ee(t.$$.fragment),a=C(),this.h()},l(r){e=m(r,"LI",{class:!0});var l=b(e);te(t.$$.fragment,l),a=D(l),l.forEach(u),this.h()},h(){i(e,"class","list-group-item bg-dark text-white")},m(r,l){T(r,e,l),ae(t,e,null),h(e,a),s=!0},p(r,l){const n={};l&1&&(n.log=r[4]),t.$set(n)},i(r){s||(y(t.$$.fragment,r),s=!0)},o(r){I(t.$$.fragment,r),s=!1},d(r){r&&u(e),le(t)}}}function Nt(o){let e,t,a,s;const r=[At,Ot],l=[];function n(c,d){return c[0]?0:1}return e=n(o),t=l[e]=r[e](o),{c(){t.c(),a=ie()},l(c){t.l(c),a=ie()},m(c,d){l[e].m(c,d),T(c,a,d),s=!0},p(c,[d]){let k=e;e=n(c),e===k?l[e].p(c,d):(ce(),I(l[k],1,1,()=>{l[k]=null}),ue(),t=l[e],t?t.p(c,d):(t=l[e]=r[e](c),t.c()),y(t,1),t.m(a.parentNode,a))},i(c){s||(y(t),s=!0)},o(c){I(t),s=!1},d(c){l[e].d(c),c&&u(a)}}}function Ut(o,e,t){let{apiToken:a}=e,s=null;const r=()=>new Headers({authorization:a,"Content-Type":"application/json"}),l=async()=>{const n=await fetch(`${ne}/tags-league/logs`,{headers:r()});if(n.status===403){alert("invalid admin access");return}t(0,s=await n.json())};return Pe(()=>{l()}),o.$$set=n=>{"apiToken"in n&&t(1,a=n.apiToken)},[s,a]}class Pt extends fe{constructor(e){super(),de(this,e,Ut,Nt,he,{apiToken:1})}}function ct(o){let e,t;return e=new vt({props:{date:o[6]}}),{c(){ee(e.$$.fragment)},l(a){te(e.$$.fragment,a)},m(a,s){ae(e,a,s),t=!0},p(a,s){const r={};s&64&&(r.date=a[6]),e.$set(r)},i(a){t||(y(e.$$.fragment,a),t=!0)},o(a){I(e.$$.fragment,a),t=!1},d(a){le(e,a)}}}function Vt(o){let e,t,a;function s(l){o[11](l)}let r={};return o[0]!==void 0&&(r.validToken=o[0]),e=new wt({props:r}),pt.push(()=>gt(e,"validToken",s)),{c(){ee(e.$$.fragment)},l(l){te(e.$$.fragment,l)},m(l,n){ae(e,l,n),a=!0},p(l,n){const c={};!t&&n&1&&(t=!0,c.validToken=l[0],mt(()=>t=!1)),e.$set(c)},i(l){a||(y(e.$$.fragment,l),a=!0)},o(l){I(e.$$.fragment,l),a=!1},d(l){le(e,l)}}}function Bt(o){let e,t,a,s,r,l,n,c,d,k,_,v,f,p,w,q,_e,z,Q,G,U,B,se,pe,Le,R,Se,be,j,H,ve,Ce,De,Y,X,M,Oe,Ae,K,Z,P,V,ge,Ne,Ve;q=new bt({});let $=o[4]&&ut(o);function Be(E,A){return E[4]?Mt:Rt}let ke=Be(o),F=ke(o),O=o[4]&&ft(o);const Re=[qt,Ht],J=[];function Me(E,A){return E[5]?0:1}return P=Me(o),V=J[P]=Re[P](o),{c(){e=g("div"),t=g("div"),a=g("h2"),s=g("button"),r=L("Compute Tags League"),l=C(),n=g("div"),c=g("div"),d=g("form"),k=g("div"),_=g("div"),v=g("label"),f=L("SEDE Cookie"),p=C(),w=g("a"),ee(q.$$.fragment),_e=C(),z=g("div"),Q=g("div"),G=g("p"),U=L(`To get a SEDE cookie go to a SEDE page like
                    `),B=g("a"),se=L(`this one
                    `),pe=L(`. Then run a query and get the cookie from the query
                    request header`),Le=C(),R=g("input"),Se=C(),$&&$.c(),be=C(),j=g("div"),H=g("button"),F.c(),Ce=C(),O&&O.c(),De=C(),Y=g("div"),X=g("h3"),M=g("button"),Oe=L("Consult the logs"),Ae=C(),K=g("div"),Z=g("div"),V.c(),this.h()},l(E){e=m(E,"DIV",{class:!0,id:!0});var A=b(e);t=m(A,"DIV",{class:!0});var W=b(t);a=m(W,"H2",{class:!0,id:!0});var He=b(a);s=m(He,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"aria-expanded":!0,"data-bs-target":!0,"aria-controls":!0});var qe=b(s);r=S(qe,"Compute Tags League"),qe.forEach(u),He.forEach(u),l=D(W),n=m(W,"DIV",{id:!0,class:!0,"aria-labelledby":!0,"data-bs-parent":!0});var ze=b(n);c=m(ze,"DIV",{class:!0});var Ge=b(c);d=m(Ge,"FORM",{class:!0});var re=b(d);k=m(re,"DIV",{class:!0});var oe=b(k);_=m(oe,"DIV",{class:!0});var Ee=b(_);v=m(Ee,"LABEL",{for:!0,class:!0});var je=b(v);f=S(je,"SEDE Cookie"),je.forEach(u),p=D(Ee),w=m(Ee,"A",{class:!0,"data-bs-toggle":!0,href:!0,role:!0,"aria-expanded":!0,"aria-controls":!0});var Ke=b(w);te(q.$$.fragment,Ke),Ke.forEach(u),Ee.forEach(u),_e=D(oe),z=m(oe,"DIV",{class:!0,id:!0});var Fe=b(z);Q=m(Fe,"DIV",{class:!0});var Qe=b(Q);G=m(Qe,"P",{});var Te=b(G);U=S(Te,`To get a SEDE cookie go to a SEDE page like
                    `),B=m(Te,"A",{href:!0,target:!0});var Ye=b(B);se=S(Ye,`this one
                    `),Ye.forEach(u),pe=S(Te,`. Then run a query and get the cookie from the query
                    request header`),Te.forEach(u),Qe.forEach(u),Fe.forEach(u),Le=D(oe),R=m(oe,"INPUT",{type:!0,id:!0,class:!0,placeholder:!0}),oe.forEach(u),Se=D(re),$&&$.l(re),be=D(re),j=m(re,"DIV",{class:!0});var ye=b(j);H=m(ye,"BUTTON",{type:!0,class:!0});var Je=b(H);F.l(Je),Je.forEach(u),Ce=D(ye),O&&O.l(ye),ye.forEach(u),re.forEach(u),Ge.forEach(u),ze.forEach(u),W.forEach(u),De=D(A),Y=m(A,"DIV",{class:!0});var we=b(Y);X=m(we,"H3",{class:!0,id:!0});var We=b(X);M=m(We,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"aria-expanded":!0,"data-bs-target":!0,"aria-controls":!0});var Xe=b(M);Oe=S(Xe,"Consult the logs"),Xe.forEach(u),We.forEach(u),Ae=D(we),K=m(we,"DIV",{id:!0,class:!0,"aria-labelledby":!0,"data-bs-parent":!0});var Ze=b(K);Z=m(Ze,"DIV",{class:!0});var xe=b(Z);V.l(xe),xe.forEach(u),Ze.forEach(u),we.forEach(u),A.forEach(u),this.h()},h(){i(s,"class","accordion-button collapsed"),i(s,"type","button"),i(s,"data-bs-toggle","collapse"),i(s,"aria-expanded","false"),i(s,"data-bs-target","#computeLeagueCalculation"),i(s,"aria-controls","computeLeagueCalculation"),i(a,"class","accordion-header"),i(a,"id","computeLeagueCalculationHeader"),i(v,"for","sedeCookie"),i(v,"class","form-label"),i(w,"class","ms-2"),i(w,"data-bs-toggle","collapse"),i(w,"href","#collapseSEDEInfo"),i(w,"role","button"),i(w,"aria-expanded","false"),i(w,"aria-controls","collapseSEDEInfo"),i(_,"class","d-flex"),i(B,"href","https://data.stackexchange.com/stackoverflow/query/1631255/check-auth-cookie"),i(B,"target","_blank"),i(Q,"class","card card-body bg-dark"),i(z,"class","collapse"),i(z,"id","collapseSEDEInfo"),i(R,"type","text"),i(R,"id","sedeCookie"),i(R,"class","form-control"),i(R,"placeholder","OptanonConsent=datestamp=..."),i(k,"class","col-md-6"),i(H,"type","submit"),i(H,"class","btn btn-primary"),H.disabled=ve=!o[1]||o[4],i(j,"class","col-12 d-flex"),i(d,"class","row g-3"),i(c,"class","accordion-body"),i(n,"id","computeLeagueCalculation"),i(n,"class","accordion-collapse collapse bg-body"),i(n,"aria-labelledby","computeLeagueCalculationHeader"),i(n,"data-bs-parent","#accordion"),i(t,"class","accordion-item"),i(M,"class","accordion-button collapsed text-black"),i(M,"type","button"),i(M,"data-bs-toggle","collapse"),i(M,"aria-expanded","false"),i(M,"data-bs-target","#checkLogsBody"),i(M,"aria-controls","checkLogsBody"),i(X,"class","accordion-header"),i(X,"id","checkLogs"),i(Z,"class","accordion-body"),i(K,"id","checkLogsBody"),i(K,"class","accordion-collapse collapse bg-body"),i(K,"aria-labelledby","checkLogs"),i(K,"data-bs-parent","#accordion"),i(Y,"class","accordion-item"),i(e,"class","accordion mt-1"),i(e,"id","accordion")},m(E,A){T(E,e,A),h(e,t),h(t,a),h(a,s),h(s,r),h(t,l),h(t,n),h(n,c),h(c,d),h(d,k),h(k,_),h(_,v),h(v,f),h(_,p),h(_,w),ae(q,w,null),h(k,_e),h(k,z),h(z,Q),h(Q,G),h(G,U),h(G,B),h(B,se),h(G,pe),h(k,Le),h(k,R),$e(R,o[1]),h(d,Se),$&&$.m(d,null),h(d,be),h(d,j),h(j,H),F.m(H,null),h(j,Ce),O&&O.m(j,null),h(e,De),h(e,Y),h(Y,X),h(X,M),h(M,Oe),h(Y,Ae),h(Y,K),h(K,Z),J[P].m(Z,null),ge=!0,Ne||(Ve=[x(R,"input",o[9]),x(d,"submit",dt(o[8]))],Ne=!0)},p(E,A){A&2&&R.value!==E[1]&&$e(R,E[1]),E[4]?$?($.p(E,A),A&16&&y($,1)):($=ut(E),$.c(),y($,1),$.m(d,be)):$&&(ce(),I($,1,1,()=>{$=null}),ue()),ke!==(ke=Be(E))&&(F.d(1),F=ke(E),F&&(F.c(),F.m(H,null))),(!ge||A&18&&ve!==(ve=!E[1]||E[4]))&&(H.disabled=ve),E[4]?O?O.p(E,A):(O=ft(E),O.c(),O.m(j,null)):O&&(O.d(1),O=null);let W=P;P=Me(E),P===W?J[P].p(E,A):(ce(),I(J[W],1,1,()=>{J[W]=null}),ue(),V=J[P],V?V.p(E,A):(V=J[P]=Re[P](E),V.c()),y(V,1),V.m(Z,null))},i(E){ge||(y(q.$$.fragment,E),y($),y(V),ge=!0)},o(E){I(q.$$.fragment,E),I($),I(V),ge=!1},d(E){E&&u(e),le(q),$&&$.d(),F.d(),O&&O.d(),J[P].d(),Ne=!1,ht(Ve)}}}function ut(o){let e,t,a;return t=new Lt({props:{tags:o[2],computedTags:o[3]}}),{c(){e=g("div"),ee(t.$$.fragment),this.h()},l(s){e=m(s,"DIV",{class:!0});var r=b(e);te(t.$$.fragment,r),r.forEach(u),this.h()},h(){i(e,"class","col-12")},m(s,r){T(s,e,r),ae(t,e,null),a=!0},p(s,r){const l={};r&4&&(l.tags=s[2]),r&8&&(l.computedTags=s[3]),t.$set(l)},i(s){a||(y(t.$$.fragment,s),a=!0)},o(s){I(t.$$.fragment,s),a=!1},d(s){s&&u(e),le(t)}}}function Rt(o){let e;return{c(){e=L("Start computation")},l(t){e=S(t,"Start computation")},m(t,a){T(t,e,a)},d(t){t&&u(e)}}}function Mt(o){let e,t;return{c(){e=g("span"),t=L(`
                  Loading...`),this.h()},l(a){e=m(a,"SPAN",{class:!0,role:!0,"aria-hidden":!0}),b(e).forEach(u),t=S(a,`
                  Loading...`),this.h()},h(){i(e,"class","spinner-border spinner-border-sm"),i(e,"role","status"),i(e,"aria-hidden","true")},m(a,s){T(a,e,s),T(a,t,s)},d(a){a&&u(e),a&&u(t)}}}function ft(o){let e,t,a,s;return{c(){e=g("button"),t=L("Cancel"),this.h()},l(r){e=m(r,"BUTTON",{type:!0,class:!0});var l=b(e);t=S(l,"Cancel"),l.forEach(u),this.h()},h(){i(e,"type","button"),i(e,"class","btn btn-danger ms-2")},m(r,l){T(r,e,l),h(e,t),a||(s=x(e,"click",o[7]),a=!0)},p:N,d(r){r&&u(e),a=!1,s()}}}function Ht(o){let e,t,a,s;return{c(){e=g("button"),t=L("See logs"),this.h()},l(r){e=m(r,"BUTTON",{class:!0});var l=b(e);t=S(l,"See logs"),l.forEach(u),this.h()},h(){i(e,"class","btn btn-primary")},m(r,l){T(r,e,l),h(e,t),a||(s=x(e,"click",o[10]),a=!0)},p:N,i:N,o:N,d(r){r&&u(e),a=!1,s()}}}function qt(o){let e,t;return e=new Pt({props:{apiToken:o[0]}}),{c(){ee(e.$$.fragment)},l(a){te(e.$$.fragment,a)},m(a,s){ae(e,a,s),t=!0},p(a,s){const r={};s&1&&(r.apiToken=a[0]),e.$set(r)},i(a){t||(y(e.$$.fragment,a),t=!0)},o(a){I(e.$$.fragment,a),t=!1},d(a){le(e,a)}}}function zt(o){let e,t,a,s,r,l,n,c,d=o[6]&&ct(o);const k=[Bt,Vt],_=[];function v(f,p){return f[0]?0:1}return r=v(o),l=_[r]=k[r](o),{c(){e=g("h1"),t=L("Tags League admin zone"),a=C(),d&&d.c(),s=C(),l.c(),n=ie(),this.h()},l(f){e=m(f,"H1",{class:!0});var p=b(e);t=S(p,"Tags League admin zone"),p.forEach(u),a=D(f),d&&d.l(f),s=D(f),l.l(f),n=ie(),this.h()},h(){i(e,"class","mb-0 mt-3 fs-3 fw-bold")},m(f,p){T(f,e,p),h(e,t),T(f,a,p),d&&d.m(f,p),T(f,s,p),_[r].m(f,p),T(f,n,p),c=!0},p(f,[p]){f[6]?d?(d.p(f,p),p&64&&y(d,1)):(d=ct(f),d.c(),y(d,1),d.m(s.parentNode,s)):d&&(ce(),I(d,1,1,()=>{d=null}),ue());let w=r;r=v(f),r===w?_[r].p(f,p):(ce(),I(_[w],1,1,()=>{_[w]=null}),ue(),l=_[r],l?l.p(f,p):(l=_[r]=k[r](f),l.c()),y(l,1),l.m(n.parentNode,n))},i(f){c||(y(d),y(l),c=!0)},o(f){I(d),I(l),c=!1},d(f){f&&u(e),f&&u(a),d&&d.d(f),f&&u(s),_[r].d(f),f&&u(n)}}}function Gt(o,e,t){let a,s,r,l,n=!1,c=!1,d,k;const _=()=>{k=setInterval(()=>{p()},5e3)},v=()=>JSON.stringify({cookie:s}),f=()=>new Headers({authorization:a,"Content-Type":"application/json"}),p=async()=>{const U=await fetch(`${ne}/tags-league/status`),{status:B,lastComputation:se,computedTagNames:pe}=await U.json();t(4,n=B==="busy"),t(3,l=pe),B==="available"&&k&&(clearInterval(k),k=void 0),B==="busy"&&!k&&_(),se&&t(6,d=new Date(se))},w=async()=>{if((await fetch(`${ne}/tags-league/cancel`,{method:"POST",headers:f()})).status===200){t(4,n=!1),alert("Computation canceled");return}t(4,n=!1),alert("Something went wrong!")},q=async()=>{t(4,n=!0);const U=await fetch(`${ne}/tags-league`,{method:"POST",headers:f(),body:v()});if(U.status===403){alert("invalid admin access"),t(4,n=!1);return}else if(U.status===400){alert("Invalid SEDE cookie provided"),t(4,n=!1);return}else if(U.status===409){alert("Currently computing");return}_(),alert("Success!")},_e=async()=>{t(2,r=await(await fetch(`${ne}/tags-league/tags`)).json())};Pe(async()=>{p(),_e()});function z(){s=this.value,t(1,s)}const Q=()=>t(5,c=!0);function G(U){a=U,t(0,a)}return[a,s,r,l,n,c,d,w,q,z,Q,G]}class Yt extends fe{constructor(e){super(),de(this,e,Gt,zt,he,{})}}export{Yt as default};
